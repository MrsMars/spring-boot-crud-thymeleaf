<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Kufar</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    <link href="../css/style.css" th:href="@{css/style.css}" rel="stylesheet" />
    <link rel="stylesheet" href="https://bootstraptema.ru/plugins/2015/bootstrap3/bootstrap.min.css" />


    <style>
.credit-card-div span {
 padding-top:10px;
 }
.credit-card-div img {
 padding-top:30px;
}
.credit-card-div .small-font {
 font-size:9px;
}
.credit-card-div .pad-adjust {
 padding-top:10px;
}
</style>


</head>
<body>
<header th:insert="blocks/header :: header"></header>

<form action="/createCard" method="post" th:object="${card}">
    <center>

        Payer's card:       <input name="block1" class="inputPayment" required placeholder maxlength="4" size="4"/>
                            <input name="block2" class="inputPayment" required placeholder maxlength="4" size="4"/>
                            <input name="block3" class="inputPayment" required placeholder maxlength="4" size="4"/>
                            <input name="block4" class="inputPayment" required placeholder maxlength="4" size="4"/>
                            <input class="done" type="submit" value="Done">
    </center>
</form>


<div class="container">
    <div class="row ">
        <div class="col-md-4 col-md-offset-4">

            <div class="credit-card-div">
                <div class="panel panel-default" >
                    <div class="panel-heading">

                        <div class="row ">
                            <div class="col-md-12">
                                <input type="text"  onkeyup="format_price(event)" class="form-control" placeholder="Enter Card Number" maxlength="19"/>

                            </div>
                        </div>

                        <div class="row ">
                            <div class="col-md-3 col-sm-3 col-xs-3">
                                <span class="help-block text-muted small-font"> Expiry Month</span>
                                    <form>
                                        <p>
                                            <select type="text" class="form-control" name="month" placeholder="MM">
                                                <option disabled selected>MM</option>
                                                <option value="t1">JAN</option>
                                                <option value="t2">FEB</option>
                                                <option value="t3">MAR</option>
                                                <option value="t4">APR</option>
                                                <option value="t5">MAY</option>
                                                <option value="t6">JUN</option>
                                                <option value="t7">JUL</option>
                                                <option value="t8">AUG</option>
                                                <option value="t9">SEP</option>
                                                <option value="t10">OCT</option>
                                                <option value="t11">NOV</option>
                                                <option value="t12">DEC</option>
                                            </select>
                                        </p>
                                    </form>
                            </div>

                            <div class="col-md-3 col-sm-3 col-xs-3">
                                <span class="help-block text-muted small-font" > Expiry Year</span>

                                <form>
                                    <p>
                                        <select type="text" class="form-control" name="year" placeholder="YY">
                                            <option disabled selected>YY</option>
                                            <option value="Y1">2015</option>
                                            <option value="Y2">2016</option>
                                            <option value="Y3">2017</option>
                                            <option value="Y4">2018</option>
                                            <option value="Y5">2019</option>
                                            <option value="Y6">2020</option>
                                            <option value="Y7">2021</option>

                                        </select>
                                    </p>
                                </form>
                            </div>
                            <div class="col-md-3 col-sm-3 col-xs-3">
                                <span class="help-block text-muted small-font" > CCV</span>
                                <input type="text" class="form-control" placeholder="CCV" maxlength="3" />
                            </div>
                            <div class="col-md-3 col-sm-3 col-xs-3">
                                <img src="https://bootstraptema.ru/snippets/form/2016/form-card/card.png" class="img-rounded" />
                            </div>
                        </div>

                        <div class="row ">
                            <div class="col-md-12 pad-adjust">

                                <input type="text" class="form-control" placeholder="Name On The Card" />
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-12 pad-adjust">
                                <div class="checkbox">
                                    <label>
                                        <input type="checkbox" checked class="text-muted"> Save details for fast payments <a href="#"> learn how ?</a>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="row ">
                            <div class="col-md-6 col-sm-6 col-xs-6 pad-adjust">
                                <input type="submit" class="done" value="PAY NOW" />
                            </div>
                        </div>

                    </div>
                </div>
            </div><!-- ./credit-card-div -->

        </div>
    </div>
</div><!-- /.container -->


<form>
    <input onkeyup="format_price(event)" name="full_price" size="20" type="text" />
</form>

<footer th:insert="blocks/footer :: footer"></footer>
</body>
<script>

   function clear_value(obj_id, event) {
	code = (event.charCode) ? event.charCode : event.keyCode;
	if(code != 9 && code != 16){
		document.getElementById(obj_id).value = '';
	}
}


function format_price(e) {
	var target = e.target || e.srcElement;

	var cursorPos = get_cursor_position(target);
	if (cursorPos == -1) { cursorPos = 0; }
	var deltaPos = 0;

	var lengthBefore = target.value.length;
	target.value = target.value.replace(/\s+/g,'').replace(/\s+$/, '');
	target.value = format_num(target.value);
	if (!deltaPos && (target.value.length - lengthBefore) > 0) { deltaPos = target.value.length - lengthBefore; }
	if (!deltaPos && target.value[ cursorPos + deltaPos ] == ' ' && target.value[ cursorPos + deltaPos - 1 ] == ' ') { deltaPos += 4; }
	set_cursor_position(target, cursorPos + deltaPos);
	return true;
}


function get_cursor_position(inputEl) {
	if (document.selection && document.selection.createRange) {
		var range = document.selection.createRange().duplicate();
		if (range.parentElement() == inputEl) {
			range.moveStart('textedit', -1);
			return range.text.length;
		}
	}
	else if (inputEl.selectionEnd) { return inputEl.selectionEnd; }
	else
		return -1;
}


function set_cursor_position(inputEl, position) {
	if (inputEl.setSelectionRange) {
		inputEl.focus();
		inputEl.setSelectionRange(position, position);
	}
	else if (inputEl.createTextRange) {
		var range = inputEl.createTextRange();
		range.collapse(true);
		range.moveEnd('character', position);
		range.moveStart('character', position);
		range.select();
	}
}


function format_num(str) {
	var retstr = '';
	var now = 0;
	for (i = str.length - 1; i >= 0; i--) {
		if (now < 4) {
			now++;
			retstr = str.charAt(i) + retstr;
		} else {
			now = 1;
			retstr = str.charAt(i) + ' ' + retstr;
		}
	}
	return retstr;
}

</script>
</html>
